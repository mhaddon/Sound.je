<!--
  ~  NestedBird  Copyright (C) 2016-2017  Michael Haddon
  ~
  ~  This program is free software: you can redistribute it and/or modify
  ~  it under the terms of the GNU Affero General Public License version 3
  ~  as published by the Free Software Foundation.
  ~
  ~  This program is distributed in the hope that it will be useful,
  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~  GNU Affero General Public License for more details.
  ~
  ~  You should have received a copy of the GNU Affero General Public License
  ~  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<html xmlns:th="http://www.thymeleaf.org"
      xmlns:v-on="http://www.vuejs.org"
      xmlns="http://www.w3.org/1999/xhtml"
>
<head>
    <title>Ploinki</title>
</head>
<body>
<script type='text/x-template' id='eventList-template' th:fragment="eventList">
    <article class="article contentcontroller eventlist"
             v-infinite="{ page: eventsRequestPage, limit: eventsPerRequest, fn: getEvents, active: isMobile }">
        <div class="contentcontroller__arrowbox" v-if="!isMobile">
            <i class="contentcontroller__arrow fa fa-arrow-left" aria-hidden="true" v-on:click="previousEvents()"
               v-show="isPreviousEvents"></i>
        </div>
        <ul class="contentcontroller__content contentlist eventlist__events">
            <li class="contentlist__item contentlist__item--wide" v-for="Date in currentEvents">
                <p class="date__title" v-text='Date.displayDateTime'></p>
                <ul class="date__locations">
                    <li class="location" v-for="Place in Date.Places">
                        <a v-href="{ page: 'Locations', name: Place.name, id: Place.id }" class="location__title"
                           v-text='Place.name'></a>
                        <ul class="location__events">
                            <li class="event" v-for="Event in Place.Events">
                                <a v-href="{ page: 'Events', name: Event.name, id: Event.id, query: { startTime: Event.startTime } }"
                                   class="event__title" v-text='Event.name'></a>
                                <p class="event__starttime" v-text="parseStartTime(Event.startTime)"></p>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="contentcontroller__arrowbox" v-if="!isMobile">
            <i class="contentcontroller__arrow contentcontroller__arrow--right fa fa-arrow-right" aria-hidden="true"
               v-on:click="nextEvents()" v-show="isNextEvents"></i>
        </div>
        <div class="loadmore eventlist__loader" v-show="isMobile"></div>
    </article>
</script>
</body>
</html>